<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>漢字調べるやつ</title>
<style>
html,
body,
textarea {
  height: 100%;
}
body {
  margin: 0;
  padding: 0;
}
textarea {
  width: 100%;
  margin: 0;
  padding: 10px;
  font-family: serif;
  text-align: justify;
  text-justify: inter-ideograph;
  line-height: 1.1;
  box-sizing: border-box;
  border-width: 0;
  outline: none;
  overflow: auto;
  resize: none;
}
@media (prefers-color-scheme: dark) {
  textarea {
    color: #fff;
    background-color: #000;
  }
}
</style>
<textarea></textarea>
<script>
let nod_textarea = document.querySelector("textarea")
window.addEventListener("DOMContentLoaded", () => {
  setFontSize()
})
window.onresize = () => {
  setFontSize()
}
window.onunload = () => {
  localStorage.setItem("contents", nod_textarea.value)
}
window.onload = () => {
  nod_textarea.textContent = localStorage.getItem("contents")
}
function setFontSize() {
  let windowHeight = window.innerHeight
  let lineHeight = 1.1
  let frameHeight = Number(window.getComputedStyle(nod_textarea).paddingTop.slice(0, -2)) + Number(window.getComputedStyle(nod_textarea).paddingBottom.slice(0, -2))
  let fontSize = 120 // およその font-size
  let lineN = (windowHeight - frameHeight) / (fontSize * lineHeight)
  if (windowHeight - fontSize * lineHeight * lineN < 10) {
    lineN = lineN - 1
  }
  fontSize = (windowHeight - frameHeight) / Math.floor(lineN) / lineHeight
  nod_textarea.style.fontSize = fontSize * 0.99 + "px"
}
</script>
</html>
