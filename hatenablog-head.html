<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/monokai-sublime.min.css">
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script>
<script>
(() => {
  let promotion = true
  document.addEventListener("DOMContentLoaded", () => {
    /*

      フリーライティングを加工する
    
    */
    document.querySelectorAll(".entry-content").forEach(rly => {
      console.log(rly.childNodes.length)
      if (
        rly.children.length === 1
        &&
        (
          rly.children[0].nodeName === "p" // 小文字
          ||
          rly.children[0].nodeName === "P" // 大文字
        )
      ) {
        rly.innerHTML = oneP(rly)
      }
    })
    /*

      highlight.js
    
    */
    document.querySelectorAll('code').forEach((el) => {
      hljs.highlightElement(el)
    })
  })
  function oneP(rly) {
    let text = rly.children[0].innerText
    return `<p><small>段落は 5 句点ごとに機械的に設けたものです。</small></p>\n${text.replace(/((?:.*?。){1,5})/g, '<p>$1</p>')}\n<p style="text-align: right;"><small>${text.replace(/(^\d{4}[/\-]\d{2}[/\-]\d{2}[ \t　]?|[ \t　])/gm, "").length} 文字</small></p>`
  }
})()
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SNXXMKK9WQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SNXXMKK9WQ');
</script>
